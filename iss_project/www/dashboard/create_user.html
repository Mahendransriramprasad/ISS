{% block head_include %}
<script src="https://cdn.tailwindcss.com"></script>
{% endblock %}
<div class="p-8 max-w-xl mx-auto">

  <h1 class="text-2xl font-bold mb-6">Create User (HR & Finance)</h1>

  <div class="mb-4">
    <label class="block mb-1">Full Name</label>
    <input id="full_name" class="p-2 border w-full rounded" placeholder="John Doe">
  </div>

  <div class="mb-4">
    <label class="block mb-1">Email</label>
    <input id="email" class="p-2 border w-full rounded" placeholder="user@example.com">
  </div>

  <div class="mb-4">
    <label class="block mb-1">Role Type</label>
    <select id="role_type" class="p-2 border w-full rounded">
      <option value="Developer">Developer</option>
      <option value="Project Manager">Project Manager</option>
      <option value="HR Finance">HR & Finance</option>
      <option value="Management">Management</option>
    </select>
  </div>

  <button onclick="createUser()" class="bg-blue-600 text-white px-4 py-2 rounded">
    Create User
  </button>

  <p id="response" class="mt-4 text-green-600"></p>
</div>

<script >
async function createUser() {
  const full_name = document.getElementById("full_name").value;
  const email = document.getElementById("email").value;
  const role_type = document.getElementById("role_type").value;

  const res = await fetch("/api/method/iss_project.www.api.hr_user_api.create_portal_user", {
    method: "POST",
    body: JSON.stringify({ full_name, email, role_type }),
    headers: { "Content-Type": "application/json" }
  });

  const data = await res.json();

  if (data.message.ok) {
    document.getElementById("response").innerText = data.message.message;
  } else {
    document.getElementById("response").innerText = "Error creating user.";
  }
}
</script>

